angular.module("myApp",["ui.router"]),angular.module("myApp").config(function(e,t){t.otherwise("/home");e.state({name:"login",url:"/home",component:"loginComponent",params:{message:null,logged:!1,created:!1,alertType:null}}),e.state({name:"createAccount",url:"/create-account",component:"createAccountComponent"}),e.state({name:"list",url:"/list",component:"listComponent"}),e.state({name:"user",url:"/user",component:"profileComponent"})}),angular.module("myApp").component("createAccountComponent",{templateUrl:"src/js/components/createAccount/create-account-view.html",controller:"createAccountController"}),angular.module("myApp").controller("createAccountController",function(e,t,o){e.createAccount=function(){var a={username:e.username,password:e.password,firstName:e.firstName,lastName:e.lastName,age:e.age};o.post("http://localhost:1407/create-account",JSON.stringify(a)).then(function(e){var o=e.data.message;t.go("login",{message:o,alertType:"alert-info",created:!0})},function(t){e.message=t.data.message})},e.message="",e.goBack=function(){t.go("login")}}),angular.module("myApp").component("loginComponent",{templateUrl:"src/js/components/login/login-view.html",controller:"loginController"}),angular.module("myApp").controller("loginController",function(e,t,o,a){e.message=o.message,e.alertType="",e.login=function(){var t={username:e.username,password:e.password};a.post("http://localhost:1407/login",JSON.stringify(t)).then(function(t){localStorage.setItem("auth-token",t.data.token),localStorage.setItem("userId",t.data.userId),e.message="Logged in",e.alertType="alert-success",e.logged=!0,e.welcome=!0,e.userId=t.data.userId},function(t){e.message=t.data.message,e.alertType="alert-danger"})},e.logout=function(){localStorage.setItem("auth-token",""),localStorage.setItem("userId",""),e.userId="",e.message="Logged out",e.alertType="alert-warning",e.logged=!1,e.welcome=!1},e.createAccount=function(){t.go("createAccount")},e.viewProfile=function(){t.go("user")},e.viewUserList=function(){t.go("list")},e.token=localStorage.getItem("auth-token"),e.userId=localStorage.getItem("userId"),""!=e.userId&&(e.welcome=!0),""!=e.token&&(e.logged=!0),o.created&&(e.alertType="alert-info")}),angular.module("myApp").component("profileComponent",{templateUrl:"src/js/components/profile/profile-view.html",controller:"profileController"}),angular.module("myApp").controller("profileController",function(e,t,o){var a=localStorage.getItem("userId"),n=localStorage.getItem("auth-token");e.editUser=editUser,e.editEnabled=!1,e.saveEdit=function(t){var l={username:e.editUsername,password:e.editPassword,firstName:e.editFirstName,lastName:e.editLastName,age:e.editAge};o.put("http://localhost:1407/user/"+a+"?token="+n,JSON.stringify(l)).then(function(t){e.message=t.data.message,e.alertType="alert-info"},function(t){e.message=t.data.message,e.alertType="alert-danger"})},e.cancelEdit=cancelEdit,e.deleteUser=function(e){},e.goBack=function(){t.go("login")},o.get("http://localhost:1407/user/"+a+"?token="+n).then(function(t){e.profileId=a,e.profileFirstName=t.data.profileFirstName,e.profileLastName=t.data.profileLastName,e.profileAge=t.data.profileAge},function(t){e.message=t.data.message,e.alertType="alert-danger"})}),angular.module("myApp").component("listComponent",{templateUrl:"src/js/components/userList/user-list-view.html",controller:"listController"}),angular.module("myApp").controller("listController",function(e,t,o){var a=localStorage.getItem("auth-token");e.message="",e.alertType="",e.goBack=function(){t.go("login")},o.get("http://localhost:1407/users?token="+a).then(function(t){e.userlist=t.data.list},function(t){e.message=t.data.message,e.alertType="alert-danger"})});